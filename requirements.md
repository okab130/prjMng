# プロジェクト管理システム 要件定義書

## 1. システム概要

### 1.1 目的
システム開発プロジェクトにおけるスケジュール管理、品質管理、レビュー管理を統合的に行い、プロジェクトの可視化と効率的な運営を実現する。

### 1.2 対象ユーザー
- プロジェクトマネージャー（PM）
- 開発リーダー
- 開発メンバー
- 品質管理担当者
- レビュアー

---

## 2. 機能要件

### 2.1 スケジュール管理機能

#### 2.1.1 プロジェクト管理
- **プロジェクト登録・編集・削除**
  - プロジェクト名、開始日、終了日、説明、ステータス（計画中、進行中、完了、中止）
  - プロジェクトメンバーの割り当て（役割：PM、リーダー、メンバー）
  
#### 2.1.2 タスク管理
- **タスク登録・編集・削除**
  - タスク名、説明、担当者、開始予定日、終了予定日、実績日
  - 優先度（高、中、低）、ステータス（未着手、進行中、完了、保留）
  - 親タスク・子タスクの階層構造（WBS）
  - 進捗率（0-100%）
  - タスク間の依存関係（前提タスク、後続タスク）
  
- **タスク一覧表示**
  - フィルタリング（担当者、ステータス、優先度、期間）
  - ソート機能（期日、優先度、ステータス）
  - 検索機能（タスク名、説明）

- **ガントチャート表示**
  - タスクの時系列表示
  - 依存関係の可視化
  - マイルストーンの表示
  - クリティカルパスの強調表示

- **カレンダー表示**
  - 月次・週次・日次表示
  - タスクの期日表示
  - 個人・チーム単位での表示切替

#### 2.1.3 マイルストーン管理
- マイルストーン登録・編集・削除
- 目標日、達成基準、ステータス
- 関連タスクの紐付け

#### 2.1.4 進捗管理
- プロジェクト全体の進捗率自動計算
- 予定と実績の比較
- 遅延タスクの検出・アラート
- バーンダウンチャート表示

---

### 2.2 品質管理機能

#### 2.2.1 品質目標管理
- **品質目標設定**
  - 品質指標の定義（バグ密度、テストカバレッジ、コードレビュー率等）
  - 目標値と閾値の設定
  - 測定期間の設定

#### 2.2.2 バグ管理
- **バグ登録・編集・削除**
  - バグID（自動採番）、タイトル、詳細説明
  - 発見日、報告者、担当者
  - 優先度（致命的、重大、中、軽微）
  - 重要度（高、中、低）
  - ステータス（新規、対応中、修正済、確認済、却下、保留）
  - 対象バージョン、修正バージョン
  - 再現手順、環境情報
  - 修正内容、テスト結果
  
- **バグ一覧・検索**
  - フィルタリング（ステータス、優先度、担当者、期間）
  - カテゴリ別集計（モジュール別、種別別）
  
- **バグトレンド分析**
  - 累積バグ件数の推移
  - 新規発見・修正済・未解決の推移
  - モジュール別バグ分布
  - 優先度別分布

#### 2.2.3 テスト管理
- **テストケース管理**
  - テストケース登録・編集・削除
  - テストケースID、タイトル、前提条件、手順、期待結果
  - カテゴリ（単体、結合、システム、受入）
  - 優先度、対象機能
  
- **テスト実行管理**
  - テスト実行結果の記録（成功、失敗、未実施、N/A）
  - 実行日、実行者、実績時間
  - 不具合発見時のバグとの紐付け
  
- **テストカバレッジ**
  - 機能別カバレッジ
  - 実施率の可視化

#### 2.2.4 品質メトリクス
- **ダッシュボード表示**
  - バグ収束曲線
  - テスト進捗率
  - コードレビュー実施率
  - 品質指標の目標達成状況
  
- **レポート出力**
  - 週次・月次品質レポート
  - Excel/PDF形式でのエクスポート

---

### 2.3 レビュー管理機能

#### 2.3.1 レビュー計画
- **レビュー登録・編集・削除**
  - レビュー名、種別（設計レビュー、コードレビュー、テストレビュー）
  - レビュー対象（ドキュメント、ソースコード、テスト仕様）
  - 実施予定日時、実施場所（会議室、オンライン）
  - レビュアー、参加者、作成者
  - レビュー資料の添付

#### 2.3.2 レビュー実施
- **指摘事項登録**
  - 指摘ID（自動採番）、指摘内容
  - 重要度（重大、中、軽微、提案）
  - ステータス（未対応、対応中、対応済、確認済、却下）
  - 指摘者、対応者
  - 該当箇所（ページ、行数、ファイル名）
  
- **レビュー議事録**
  - 参加者、日時、所要時間
  - 決定事項、課題
  - 全体所見（承認、条件付承認、差し戻し）

#### 2.3.3 指摘事項管理
- **指摘事項一覧・検索**
  - フィルタリング（ステータス、重要度、対応者）
  - レビュー別、プロジェクト別集計
  
- **対応状況追跡**
  - 対応内容の記録
  - 対応完了日、確認者、確認日
  - 未解決指摘のアラート

#### 2.3.4 レビュー分析
- **レビュー実績管理**
  - レビュー実施回数、時間
  - 指摘件数の推移
  - レビュー種別・重要度別の集計
  
- **レビュー効果測定**
  - レビューでの指摘率
  - レビュー後のバグ発見率
  - レビュー工数の可視化

---

## 3. 非機能要件

### 3.1 パフォーマンス要件
- ページ表示：3秒以内
- 検索処理：5秒以内
- 同時接続ユーザー数：100名以上

### 3.2 セキュリティ要件
- ユーザー認証（ユーザーID/パスワード）
- ロールベースアクセス制御（RBAC）
  - **Phase 1**: 全ロールが全機能を操作可能（プロトタイプ段階）
  - **Phase 2**: 詳細な権限制御を実装
    - 管理者：全機能の操作権限
    - PM：プロジェクト内の全機能操作権限
    - メンバー：割り当てられたタスク・バグ・レビューの操作権限
    - 閲覧者：参照のみ
- セッション管理（タイムアウト：30分）
- パスワードポリシー（8文字以上、複雑性要件）
- 通信の暗号化（HTTPS）
- 変更履歴の完全保存（監査証跡）

### 3.3 可用性要件
- 稼働率：99%以上（営業時間内）
- バックアップ：日次（データベース）
- 復旧時間目標（RTO）：4時間以内
- 復旧時点目標（RPO）：1日以内

### 3.4 保守性要件
- ログ記録（操作ログ、エラーログ）
- データベースメンテナンス機能
- マスターデータ管理機能

### 3.5 ユーザビリティ要件
- レスポンシブデザイン（PC、タブレット対応）
- 直感的なUI/UX
- 操作マニュアルの提供
- ヘルプ機能

### 3.6 互換性要件
- 対応ブラウザ：Chrome、Firefox、Edge、Safari（最新版および1世代前）
- データエクスポート：Excel、CSV、PDF形式

---

## 4. データモデル概要

### 4.1 主要エンティティ

#### ユーザー管理
- **User（ユーザー）**
  - ユーザーID、氏名、メールアドレス、パスワード、ロール、所属

#### プロジェクト管理
- **Project（プロジェクト）**
  - プロジェクトID、プロジェクト名、開始日、終了日、ステータス、説明
  
- **ProjectMember（プロジェクトメンバー）**
  - プロジェクトID、ユーザーID、役割

#### スケジュール管理
- **Task（タスク）**
  - タスクID、プロジェクトID、タスク名、説明、担当者ID
  - 開始予定日、終了予定日、開始実績日、終了実績日
  - ステータス、優先度、進捗率、親タスクID
  
- **TaskDependency（タスク依存関係）**
  - 前提タスクID、後続タスクID、依存タイプ
  
- **Milestone（マイルストーン）**
  - マイルストーンID、プロジェクトID、名称、目標日、達成基準、ステータス

#### 品質管理
- **Bug（バグ）**
  - バグID、プロジェクトID、タイトル、詳細、報告者ID、担当者ID
  - 発見日、優先度、重要度、ステータス、カテゴリ
  - 対象バージョン、修正バージョン、修正内容
  
- **TestCase（テストケース）**
  - テストケースID、プロジェクトID、タイトル、カテゴリ
  - 前提条件、手順、期待結果、優先度
  
- **TestExecution（テスト実行）**
  - 実行ID、テストケースID、実行日、実行者ID
  - 結果、実績時間、備考、関連バグID
  
- **QualityMetric（品質メトリクス）**
  - メトリクスID、プロジェクトID、指標名、目標値、実績値、測定日

#### レビュー管理
- **Review（レビュー）**
  - レビューID、プロジェクトID、レビュー名、種別
  - 実施予定日時、実施日時、場所、ステータス、結論
  
- **ReviewParticipant（レビュー参加者）**
  - レビューID、ユーザーID、役割（レビュアー、作成者、参加者）
  
- **ReviewIssue（指摘事項）**
  - 指摘ID、レビューID、指摘内容、重要度、ステータス
  - 指摘者ID、対応者ID、該当箇所、対応内容
  - 対応完了日、確認者ID、確認日

---

## 5. 画面一覧

### 5.1 共通
1. ログイン画面
2. ダッシュボード（総合）
3. ユーザープロフィール編集画面

### 5.2 プロジェクト管理
4. プロジェクト一覧画面
5. プロジェクト詳細・編集画面
6. プロジェクトメンバー管理画面

### 5.3 スケジュール管理
7. タスク一覧画面
8. タスク詳細・編集画面
9. ガントチャート画面
10. カレンダー画面
11. マイルストーン管理画面

### 5.4 品質管理
12. 品質ダッシュボード画面
13. バグ一覧画面
14. バグ詳細・編集画面
15. テストケース一覧画面
16. テストケース詳細・編集画面
17. テスト実行画面
18. 品質レポート画面

### 5.5 レビュー管理
19. レビュー一覧画面
20. レビュー詳細・編集画面
21. 指摘事項一覧画面
22. 指摘事項詳細・編集画面
23. レビュー実績レポート画面

### 5.6 管理機能
24. ユーザー管理画面
25. マスターデータ管理画面
26. システム設定画面

---

## 6. 制約条件・前提条件

### 6.1 技術スタック（推奨）
- **バックエンド**: Python 3.10+、Django 4.2+
- **フロントエンド**: HTML5、CSS3、JavaScript、Bootstrap 5
- **データベース**: PostgreSQL 14+ または MySQL 8+
- **Webサーバー**: Nginx + Gunicorn
- **開発環境**: Docker、Git

### 6.2 開発体制
- 開発期間：6ヶ月（設計1ヶ月、開発3ヶ月、テスト1.5ヶ月、リリース準備0.5ヶ月）
- 開発人員：3-5名

### 6.3 運用環境
- クラウド環境またはオンプレミス
- OS: Linux（Ubuntu 22.04 LTS推奨）

---

## 7. 要件の優先度

### Phase 1（MVP: Minimum Viable Product）
- ユーザー認証・認可
- プロジェクト管理基本機能
- タスク管理基本機能（CRUD、一覧、簡易ガントチャート）
- バグ管理基本機能（CRUD、一覧）
- レビュー管理基本機能（CRUD、指摘事項管理）

### Phase 2（機能拡張）
- 高度なスケジュール管理（依存関係、クリティカルパス、バーンダウン）
- テスト管理機能
- 品質メトリクス・ダッシュボード
- レビュー分析機能

### Phase 3（最適化・高度機能）
- 通知機能の拡張（メール、プッシュ通知、Slack連携）
- API提供（外部ツール連携）
- 高度な分析・レポート機能
- モバイルアプリ対応
- 詳細な権限制御（ロール・機能別）

---

## 8. 想定される課題と対応方針

### 8.1 データ整合性
- **課題**: タスク依存関係の循環参照、削除時の整合性
- **対応**: データベース制約、バリデーション実装、論理削除の採用

### 8.2 パフォーマンス
- **課題**: 大量データでのガントチャート描画、集計処理
- **対応**: ページネーション、非同期処理、キャッシュ活用、インデックス最適化

### 8.3 ユーザビリティ
- **課題**: 複雑な機能による操作の煩雑さ
- **対応**: 段階的な機能公開、チュートリアル提供、UIの継続的改善

### 8.4 セキュリティ
- **課題**: 機密情報の保護、不正アクセス
- **対応**: Django標準のセキュリティ機能活用、定期的な脆弱性診断

---

## 9. 次のステップ

1. **要件の詳細化・明確化**
   - 曖昧な部分の洗い出し
   - ステークホルダーへのヒアリング
   
2. **データモデル設計（models.py）**
   - エンティティ関係図（ER図）作成
   - Djangoモデルの実装
   
3. **画面設計・モック作成**
   - ワイヤーフレーム作成
   - 画面遷移図作成
   
4. **詳細設計**
   - URLルーティング設計
   - ビュー設計
   - API設計（必要に応じて）

---

## 10. 質問事項・確認事項

以下について、追加の情報や優先順位の確認が必要です：

1. **運用形態**: オンプレミス or クラウド？
2. **ユーザー数**: 想定される同時接続数、総ユーザー数は？
3. **既存システムとの連携**: Git、CI/CDツール、チャットツールとの連携は必要か？
4. **予算・期間**: 開発予算、リリース期限の制約は？
5. **データ移行**: 既存データのインポートは必要か？
6. **カスタマイズ要件**: 組織固有のワークフローやフィールドのカスタマイズは必要か？
7. **レポート要件**: 特定のフォーマットや定期レポートの自動生成は必要か？
8. **通知要件**: リアルタイム通知、メール通知、Slack連携などは必要か？

---

## 補足：要件の曖昧性・矛盾の確認結果

現時点で明らかな矛盾や曖昧性は以下の通りです：

### 明確化済み事項
1. **タスクとバグの関係**: **別管理** - バグとタスクは独立して管理し、必要に応じて関連付け
2. **レビューとタスクの関係**: **管理しない** - レビュー実施自体は独立したエンティティとして管理
3. **権限の詳細**: **全ロールが全機能を操作可能** - Phase 1では詳細な権限制御は実装せず、Phase 2で検討
4. **通知タイミング**: **プロジェクトマネージャーに通知** - 主要なイベント（タスク遅延、バグ登録、レビュー完了等）をPMに通知
5. **履歴管理**: **すべて保存** - 主要エンティティ（Project, Task, Bug, Review, ReviewIssue）の変更履歴を無期限保存

### 追加仕様
- **バグ修正タスク**: バグは独立管理するが、修正作業をタスクとして登録する場合は、Taskモデルのrelated_bugフィールドで紐付け
- **通知対象**: 各プロジェクトのPM（ProjectMember.role='PM'）が主要通知を受信
- **履歴保存方式**: django-simple-historyライブラリを使用し、全フィールドの変更前後を記録
