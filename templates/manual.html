<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プロジェクト管理システム - 利用者マニュアル</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body {
            padding-top: 20px;
            padding-bottom: 40px;
        }
        .sidebar {
            position: fixed;
            top: 70px;
            left: 0;
            bottom: 0;
            width: 250px;
            overflow-y: auto;
            background-color: #f8f9fa;
            padding: 20px;
        }
        .content {
            margin-left: 270px;
            padding: 20px;
        }
        .nav-link {
            color: #333;
            padding: 5px 10px;
        }
        .nav-link:hover {
            background-color: #e9ecef;
            border-radius: 5px;
        }
        .nav-link.active {
            background-color: #0d6efd;
            color: white;
            border-radius: 5px;
        }
        h2 {
            margin-top: 40px;
            padding-bottom: 10px;
            border-bottom: 2px solid #0d6efd;
        }
        h3 {
            margin-top: 30px;
            color: #0d6efd;
        }
        .alert-info {
            margin-top: 20px;
        }
        code {
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
        }
        .screenshot {
            max-width: 100%;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            margin: 20px 0;
        }
        .step {
            background-color: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #0d6efd;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#top">
                <i class="bi bi-book"></i> プロジェクト管理システム マニュアル
            </a>
            <a href="/" class="btn btn-light btn-sm">
                <i class="bi bi-house"></i> システムに戻る
            </a>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="sidebar">
                <h5>目次</h5>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link" href="#overview">1. システム概要</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#login">2. ログイン</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#dashboard">3. ダッシュボード</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#projects">4. プロジェクト管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#tasks">5. タスク管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#categories">6. 分類マスタ設定</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#auto-status">7. 自動ステータス更新</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#tips">8. 便利な機能</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#troubleshooting">9. トラブルシューティング</a>
                    </li>
                </ul>
            </nav>

            <!-- メインコンテンツ -->
            <main class="content">
                <div id="top"></div>
                <h1 class="mb-4">
                    <i class="bi bi-book-fill text-primary"></i> 
                    プロジェクト管理システム 利用者マニュアル
                </h1>
                
                <div class="alert alert-info">
                    <i class="bi bi-info-circle"></i> 
                    <strong>本マニュアルについて</strong><br>
                    本マニュアルは、プロジェクト管理システムの基本的な使い方を説明します。
                </div>

                <!-- 1. システム概要 -->
                <section id="overview">
                    <h2><i class="bi bi-info-square"></i> 1. システム概要</h2>
                    
                    <h3>1.1 システムの目的</h3>
                    <p>
                        プロジェクト管理システムは、プロジェクトの進行状況を可視化し、
                        タスクの管理、品質管理、レビュー管理を一元的に行うためのシステムです。
                    </p>

                    <h3>1.2 主な機能</h3>
                    <ul>
                        <li><strong>プロジェクト管理:</strong> プロジェクトの作成、編集、進捗管理</li>
                        <li><strong>タスク管理:</strong> タスクの作成、割り当て、ステータス管理</li>
                        <li><strong>分類管理:</strong> システム名、大分類、中分類によるタスク分類</li>
                        <li><strong>自動ステータス更新:</strong> 実績日付入力による自動ステータス更新</li>
                        <li><strong>バグ管理:</strong> バグの登録、追跡、解決管理</li>
                        <li><strong>レビュー管理:</strong> レビューの実施、指摘事項管理</li>
                        <li><strong>カレンダー・ガントチャート:</strong> 視覚的なスケジュール管理</li>
                    </ul>

                    <h3>1.3 対応ブラウザ</h3>
                    <ul>
                        <li>Google Chrome（最新版）</li>
                        <li>Microsoft Edge（最新版）</li>
                        <li>Firefox（最新版）</li>
                        <li>Safari（最新版）</li>
                    </ul>
                </section>

                <!-- 2. ログイン -->
                <section id="login">
                    <h2><i class="bi bi-door-open"></i> 2. ログイン</h2>
                    
                    <h3>2.1 ログイン方法</h3>
                    <div class="step">
                        <strong>手順1:</strong> ブラウザでシステムのURLにアクセスします<br>
                        <code>http://localhost:8000/</code>
                    </div>
                    <div class="step">
                        <strong>手順2:</strong> ログインIDとパスワードを入力します<br>
                        <small class="text-muted">※初期ユーザー: admin / 管理者から提供されたパスワード</small>
                    </div>
                    <div class="step">
                        <strong>手順3:</strong> 「ログイン」ボタンをクリックします
                    </div>

                    <h3>2.2 ログアウト</h3>
                    <p>
                        画面右上のユーザー名をクリックし、ドロップダウンメニューから「ログアウト」を選択します。
                    </p>

                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i>
                        <strong>セキュリティ上の注意</strong><br>
                        使用後は必ずログアウトしてください。特に共有PCを使用する場合は重要です。
                    </div>
                </section>

                <!-- 3. ダッシュボード -->
                <section id="dashboard">
                    <h2><i class="bi bi-speedometer2"></i> 3. ダッシュボード</h2>
                    
                    <h3>3.1 ダッシュボード画面</h3>
                    <p>
                        ログイン後、最初に表示される画面です。プロジェクトとタスクの概要が一目で確認できます。
                    </p>

                    <h3>3.2 表示内容</h3>
                    <ul>
                        <li><strong>自分のタスク:</strong> 自分に割り当てられたタスクの一覧</li>
                        <li><strong>期限が近いタスク:</strong> 期限が近づいているタスク</li>
                        <li><strong>プロジェクト進捗:</strong> 各プロジェクトの進捗状況</li>
                    </ul>
                </section>

                <!-- 4. プロジェクト管理 -->
                <section id="projects">
                    <h2><i class="bi bi-folder"></i> 4. プロジェクト管理</h2>
                    
                    <h3>4.1 プロジェクト一覧</h3>
                    <p>
                        上部メニューの「プロジェクト」をクリックすると、プロジェクト一覧が表示されます。
                    </p>

                    <h3>4.2 プロジェクトの作成</h3>
                    <div class="step">
                        <strong>手順1:</strong> プロジェクト一覧画面の「新規プロジェクト」ボタンをクリック
                    </div>
                    <div class="step">
                        <strong>手順2:</strong> 必須項目を入力<br>
                        <ul>
                            <li>プロジェクトコード（例: PROJ01）</li>
                            <li>プロジェクト名</li>
                            <li>開始日、終了日</li>
                            <li>プロジェクトマネージャー</li>
                        </ul>
                    </div>
                    <div class="step">
                        <strong>手順3:</strong> 「作成」ボタンをクリック
                    </div>

                    <h3>4.3 プロジェクトの編集</h3>
                    <p>
                        プロジェクト一覧で該当プロジェクトの「編集」ボタンをクリックし、必要な項目を修正します。
                    </p>
                </section>

                <!-- 5. タスク管理 -->
                <section id="tasks">
                    <h2><i class="bi bi-list-task"></i> 5. タスク管理</h2>
                    
                    <h3>5.1 タスク一覧</h3>
                    <p>
                        上部メニューの「タスク」をクリックすると、タスク一覧が表示されます。
                    </p>

                    <h4>フィルター機能</h4>
                    <p>タスク一覧画面では、以下の条件でフィルターできます：</p>
                    <ul>
                        <li>プロジェクト</li>
                        <li>システム名</li>
                        <li>大分類</li>
                        <li>ステータス（未着手、進行中、完了、保留）</li>
                        <li>担当者</li>
                    </ul>

                    <h3>5.2 タスクの作成</h3>
                    <div class="step">
                        <strong>手順1:</strong> タスク一覧画面の「新規タスク」ボタンをクリック
                    </div>
                    <div class="step">
                        <strong>手順2:</strong> プロジェクトを選択
                    </div>
                    <div class="step">
                        <strong>手順3:</strong> システム名、大分類、中分類を選択<br>
                        <small class="text-muted">※プロジェクトを選択すると、システム名が自動的に読み込まれます</small>
                    </div>
                    <div class="step">
                        <strong>手順4:</strong> タスク情報を入力<br>
                        <ul>
                            <li>タイトル（必須）</li>
                            <li>ステータス、優先度、担当者</li>
                            <li>開始予定日、終了予定日</li>
                            <li>見積工数</li>
                            <li>説明（任意）</li>
                        </ul>
                        <small class="text-muted">※タスク番号は自動採番されます</small>
                    </div>
                    <div class="step">
                        <strong>手順5:</strong> 画面右上の「作成」ボタンをクリック
                    </div>

                    <h3>5.3 タスクの編集</h3>
                    <p>
                        タスク一覧で該当タスクの「編集」ボタンをクリックし、必要な項目を修正します。
                        編集画面では、ボタンが右上に配置されているため、スクロールせずに保存できます。
                    </p>

                    <h3>5.4 タスクの複製</h3>
                    <div class="step">
                        <strong>手順1:</strong> タスク詳細画面の「複製」ボタンをクリック
                    </div>
                    <div class="step">
                        <strong>手順2:</strong> 複製元のタスク情報がコピーされた状態で編集画面が開きます
                    </div>
                    <div class="step">
                        <strong>手順3:</strong> タイトルなど必要な項目を修正
                    </div>
                    <div class="step">
                        <strong>手順4:</strong> 「作成」ボタンをクリック
                    </div>

                    <div class="alert alert-info">
                        <i class="bi bi-lightbulb"></i>
                        <strong>便利な使い方</strong><br>
                        似たようなタスクが複数ある場合、1つ目を作成してから複製すると効率的です。
                    </div>

                    <h3>5.5 タスクの削除</h3>
                    <p>
                        タスク一覧またはタスク詳細画面の「削除」ボタンをクリックします。
                        確認ダイアログが表示されるので、「削除」をクリックすると論理削除されます。
                    </p>
                </section>

                <!-- 6. 分類マスタ設定 -->
                <section id="categories">
                    <h2><i class="bi bi-diagram-3"></i> 6. 分類マスタ設定</h2>
                    
                    <h3>6.1 分類マスタとは</h3>
                    <p>
                        タスクを効率的に管理するため、3階層の分類体系を提供しています：
                    </p>
                    <ul>
                        <li><strong>システム名:</strong> 最上位の分類（例: Webシステム、モバイルアプリ、APIサーバー）</li>
                        <li><strong>大分類:</strong> システム名配下の機能分類（例: 認証・認可、注文管理）</li>
                        <li><strong>中分類:</strong> 大分類配下の詳細分類（例: ログイン機能、カート機能）</li>
                    </ul>

                    <h3>6.2 分類マスタの登録（Django Admin）</h3>
                    <div class="step">
                        <strong>手順1:</strong> 画面右上のユーザー名をクリック → 「管理画面」を選択
                    </div>
                    <div class="step">
                        <strong>手順2:</strong> 「システム分類」「大分類」「中分類」のいずれかを選択
                    </div>
                    <div class="step">
                        <strong>手順3:</strong> 「追加」ボタンをクリック
                    </div>
                    <div class="step">
                        <strong>手順4:</strong> 必要な情報を入力<br>
                        <ul>
                            <li>プロジェクト（システム名の場合）</li>
                            <li>システム名/大分類（大分類/中分類の場合）</li>
                            <li>コード（例: WEB, AUTH, LOGIN）</li>
                            <li>名称</li>
                            <li>表示順（数値）</li>
                        </ul>
                    </div>
                    <div class="step">
                        <strong>手順5:</strong> 「保存」ボタンをクリック
                    </div>

                    <h3>6.3 分類の階層構造例</h3>
                    <pre class="bg-light p-3 rounded">
プロジェクト: モバイルオーダシステム開発
├─ WEB（Webシステム）
│  ├─ AUTH（認証・認可）
│  │  ├─ LOGIN（ログイン機能）
│  │  ├─ LOGOUT（ログアウト機能）
│  │  └─ PASSWD（パスワード管理）
│  ├─ ORDER（注文管理）
│  │  ├─ CART（カート機能）
│  │  ├─ CONFIRM（注文確認）
│  │  └─ HISTORY（注文履歴）
│  └─ MENU（メニュー管理）
│     ├─ LIST（メニュー一覧）
│     └─ DETAIL（メニュー詳細）
├─ MOBILE（モバイルアプリ）
└─ API（APIサーバー）
   └─ AUTH（認証API）
      ├─ TOKEN（トークン発行）
      └─ REFRESH（トークン更新）
                    </pre>
                </section>

                <!-- 7. 自動ステータス更新 -->
                <section id="auto-status">
                    <h2><i class="bi bi-lightning"></i> 7. 自動ステータス更新</h2>
                    
                    <h3>7.1 機能概要</h3>
                    <p>
                        実績日付を入力すると、タスクのステータスと進捗率が自動的に更新されます。
                        手動でステータスを変更する必要がないため、入力の手間が省けます。
                    </p>

                    <h3>7.2 自動更新のルール</h3>
                    
                    <h4>パターン1: タスクを開始</h4>
                    <div class="step">
                        <strong>操作:</strong> 実績開始日を入力<br>
                        <strong>自動更新:</strong> ステータス → 「進行中」
                    </div>
                    <p class="text-muted">
                        ※未着手のタスクのみ自動更新されます
                    </p>

                    <h4>パターン2: タスクを完了</h4>
                    <div class="step">
                        <strong>操作:</strong> 実績終了日を入力<br>
                        <strong>自動更新:</strong> 
                        <ul>
                            <li>ステータス → 「完了」</li>
                            <li>進捗率 → 100%</li>
                        </ul>
                    </div>

                    <h4>パターン3: タスクを再開（やり直し）</h4>
                    <div class="step">
                        <strong>操作:</strong> 実績終了日を削除<br>
                        <strong>自動更新:</strong> ステータス → 「進行中」<br>
                        <small class="text-muted">※実績開始日がある場合</small>
                    </div>

                    <h3>7.3 使用例</h3>
                    
                    <div class="card mb-3">
                        <div class="card-header bg-primary text-white">
                            <strong>例1: タスクを開始する</strong>
                        </div>
                        <div class="card-body">
                            <ol>
                                <li>タスク編集画面を開く</li>
                                <li>実績開始日に「2025/01/10」を入力</li>
                                <li>
                                    → ステータスが自動的に「進行中」になる
                                    <span class="badge bg-success">自動</span>
                                </li>
                                <li>画面右上の「更新」ボタンをクリック</li>
                            </ol>
                        </div>
                    </div>

                    <div class="card mb-3">
                        <div class="card-header bg-primary text-white">
                            <strong>例2: タスクを完了する</strong>
                        </div>
                        <div class="card-body">
                            <ol>
                                <li>タスク編集画面を開く</li>
                                <li>実績終了日に「2025/01/20」を入力</li>
                                <li>
                                    → ステータスが自動的に「完了」になる
                                    <span class="badge bg-success">自動</span><br>
                                    → 進捗率が自動的に100%になる
                                    <span class="badge bg-success">自動</span>
                                </li>
                                <li>画面右上の「更新」ボタンをクリック</li>
                            </ol>
                        </div>
                    </div>

                    <div class="alert alert-success">
                        <i class="bi bi-check-circle"></i>
                        <strong>メリット</strong><br>
                        <ul class="mb-0">
                            <li>ステータス変更の手間が省ける</li>
                            <li>進捗率の入力忘れがなくなる</li>
                            <li>データの整合性が保たれる</li>
                        </ul>
                    </div>
                </section>

                <!-- 8. 便利な機能 -->
                <section id="tips">
                    <h2><i class="bi bi-star"></i> 8. 便利な機能</h2>
                    
                    <h3>8.1 カレンダー表示</h3>
                    <p>
                        タスク一覧画面の「カレンダー」ボタンをクリックすると、
                        タスクをカレンダー形式で確認できます。
                    </p>

                    <h3>8.2 ガントチャート</h3>
                    <p>
                        タスク一覧画面の「ガントチャート」ボタンをクリックすると、
                        タスクのスケジュールを視覚的に確認できます。
                    </p>

                    <h3>8.3 タスクコメント</h3>
                    <p>
                        タスク詳細画面でコメントを追加できます。
                        進捗報告や質問事項の記録に便利です。
                    </p>

                    <h3>8.4 検索・フィルター</h3>
                    <p>
                        タスク一覧画面のフィルター機能を活用することで、
                        必要なタスクを素早く見つけることができます。
                    </p>
                    <ul>
                        <li><strong>自分のタスクのみ表示:</strong> 担当者フィルターで「自分のタスク」を選択</li>
                        <li><strong>未完了タスクのみ表示:</strong> ステータスフィルターで「未着手」「進行中」を選択</li>
                        <li><strong>特定システムのタスク:</strong> システム名フィルターを使用</li>
                    </ul>
                </section>

                <!-- 9. トラブルシューティング -->
                <section id="troubleshooting">
                    <h2><i class="bi bi-tools"></i> 9. トラブルシューティング</h2>
                    
                    <h3>9.1 よくある質問</h3>
                    
                    <div class="card mb-3">
                        <div class="card-header">
                            <strong>Q1: ログインできません</strong>
                        </div>
                        <div class="card-body">
                            <p><strong>A:</strong></p>
                            <ul>
                                <li>ログインIDとパスワードが正しいか確認してください</li>
                                <li>CapsLockがオンになっていないか確認してください</li>
                                <li>ブラウザのCookieが有効になっているか確認してください</li>
                                <li>問題が解決しない場合は、システム管理者に連絡してください</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card mb-3">
                        <div class="card-header">
                            <strong>Q2: システム名が選択できません</strong>
                        </div>
                        <div class="card-body">
                            <p><strong>A:</strong></p>
                            <ul>
                                <li>まずプロジェクトを選択してください</li>
                                <li>プロジェクトを選択すると、自動的にシステム名のリストが読み込まれます</li>
                                <li>システム名が表示されない場合は、分類マスタが登録されていない可能性があります</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card mb-3">
                        <div class="card-header">
                            <strong>Q3: タスク番号が自動で入力されません</strong>
                        </div>
                        <div class="card-body">
                            <p><strong>A:</strong></p>
                            <ul>
                                <li>タスク番号は保存時に自動採番されます</li>
                                <li>入力画面では空欄のままで問題ありません</li>
                                <li>保存後にタスク番号が割り当てられます</li>
                            </ul>
                        </div>
                    </div>

                    <div class="card mb-3">
                        <div class="card-header">
                            <strong>Q4: ステータスが自動更新されません</strong>
                        </div>
                        <div class="card-body">
                            <p><strong>A:</strong></p>
                            <ul>
                                <li>自動更新は保存時に実行されます</li>
                                <li>JavaScriptによるリアルタイム表示は、保存前のプレビューです</li>
                                <li>必ず「更新」ボタンをクリックして保存してください</li>
                            </ul>
                        </div>
                    </div>

                    <h3>9.2 エラーメッセージと対処法</h3>
                    
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>エラーメッセージ</th>
                                <th>原因</th>
                                <th>対処法</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>終了予定日は開始予定日より後である必要があります</td>
                                <td>日付の前後関係が不正</td>
                                <td>開始予定日が終了予定日より前になるように修正</td>
                            </tr>
                            <tr>
                                <td>このフィールドは必須です</td>
                                <td>必須項目が未入力</td>
                                <td>赤字の<span class="text-danger">*</span>マークがある項目を入力</td>
                            </tr>
                            <tr>
                                <td>中分類と大分類の関係が正しくありません</td>
                                <td>階層の整合性エラー</td>
                                <td>大分類を選択し直してから中分類を選択</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>9.3 お問い合わせ</h3>
                    <div class="alert alert-primary">
                        <i class="bi bi-envelope"></i>
                        <strong>サポート窓口</strong><br>
                        マニュアルで解決しない問題がある場合は、以下にお問い合わせください：<br>
                        <ul class="mb-0">
                            <li>システム管理者: admin@example.com</li>
                            <li>内線: xxxx-xxxx</li>
                        </ul>
                    </div>
                </section>

                <hr class="my-5">

                <div class="text-center text-muted">
                    <p>
                        <small>
                            プロジェクト管理システム 利用者マニュアル v1.0<br>
                            最終更新日: 2025年1月
                        </small>
                    </p>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // アクティブなナビゲーションリンクのハイライト
        document.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.sidebar .nav-link');
            
            let currentSection = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= sectionTop - 100) {
                    currentSection = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + currentSection) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>